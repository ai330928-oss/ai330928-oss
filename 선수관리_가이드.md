# 선수 관리 가이드

## 선수 데이터 관리 위치

### 1. 마켓 선수 (구매 가능한 전체 선수 풀)

**위치:**
- **소스 코드**: `src/PlayerData.js` 파일에 정의
  - `SOCCER_DATA`: 축구 선수 목록
  - `NBA_DATA`: 농구 선수 목록
- **데이터베이스**: `market_players` 테이블에 저장
  - 서버 시작 시 자동으로 `PlayerData.js`의 데이터를 데이터베이스에 저장

**특징:**
- 모든 사용자가 공유하는 전체 선수 풀
- 이적 시장에서 구매할 수 있는 선수들
- 서버 재시작 시 `PlayerData.js`에서 자동으로 초기화됨

**수정 방법:**
1. `src/PlayerData.js` 파일을 열어서 선수 추가/수정
2. 서버 재시작 시 자동으로 데이터베이스에 반영

### 2. 보유 선수 (내가 구매한 선수들)

**위치:**
- **데이터베이스**: `players` 테이블에 저장
- 각 사용자별로 독립적으로 관리됨

**특징:**
- 이적 시장에서 구매한 선수들
- 강화 레벨, 고유 ID(uid) 등이 저장됨
- 판매하면 데이터베이스에서 삭제됨

**관리 방법:**
- **구매**: 이적 시장 → 영입 탭에서 선수 클릭
- **판매**: 이적 시장 → 방출 탭에서 선수 클릭
- **강화**: 선수 강화 메뉴에서 관리

### 3. 데이터베이스 구조

```
database.sqlite
├── market_players (전체 선수 풀)
│   ├── id, name, team, ovr, pos, img, sport
│   └── 모든 사용자가 공유
│
├── user_saves (사용자 저장 데이터)
│   ├── id, user_id, sport, money, formation
│   └── 각 사용자별 게임 상태
│
└── players (보유 선수)
    ├── id, save_id, player_id, name, team, ovr, pos, img, level, uid
    └── 각 사용자가 구매한 선수들
```

## 선수 추가/수정 방법

### 마켓에 새 선수 추가하기

1. `src/PlayerData.js` 파일 열기
2. `SOCCER_DATA` 또는 `NBA_DATA` 배열에 새 선수 객체 추가:

```javascript
{ 
  id: 999, 
  name: "선수이름", 
  team: "팀명", // 또는 ["팀1", "팀2"] 배열
  ovr: 85, 
  pos: "FW", // 또는 "MF", "DF", "GK" (축구) / "G", "F", "C" (농구)
  img: "이미지URL" 
}
```

3. 서버 재시작:
```bash
npm run server
```

4. 서버가 시작되면 자동으로 새 선수를 `market_players` 테이블에 추가합니다.

## 데이터베이스 확인 방법

### SQLite 데이터베이스 직접 확인

```bash
# SQLite 설치 필요
sqlite3 database.sqlite

# 마켓 선수 조회
SELECT * FROM market_players WHERE sport = 'soccer';

# 내 보유 선수 조회 (user_id 필요)
SELECT p.* FROM players p 
JOIN user_saves s ON p.save_id = s.id 
WHERE s.user_id = 'user_xxx' AND s.sport = 'soccer';
```

## API를 통한 선수 관리

### 마켓 선수 목록 조회
```
GET http://localhost:3001/api/market/soccer
GET http://localhost:3001/api/market/nba
```

### 선수 구매
```
POST http://localhost:3001/api/player
Body: {
  "userId": "user_xxx",
  "sport": "soccer",
  "player": { ... }
}
```

### 선수 판매
```
DELETE http://localhost:3001/api/player/:uid
```

### 선수 강화 업데이트
```
PUT http://localhost:3001/api/player/:uid
Body: {
  "level": 5
}
```

## 요약

- **마켓 선수**: `src/PlayerData.js`에서 관리 → `market_players` 테이블
- **보유 선수**: 게임 내에서 구매/판매 → `players` 테이블
- **새 선수 추가**: `PlayerData.js` 수정 후 서버 재시작

